(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[916],{212:(e,t,r)=>{Promise.resolve().then(r.bind(r,4731))},3796:(e,t,r)=>{"use strict";r.d(t,{As:()=>n,jb:()=>i,lF:()=>l,renderQSLCardExact:()=>o,zu:()=>s});var a=r(5844);let s=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1650,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1050;console.log("renderQSLCardWithTable: Starting render with:",{hasBackgroundImage:!!e,hasSvgTable:!!t,canvasSize:"".concat(r,"x").concat(s)});let l=document.createElement("canvas"),i=l.getContext("2d");if(!i)throw Error("Could not get canvas context");if(l.width=r,l.height=s,i.fillStyle="white",i.fillRect(0,0,r,s),e.width===r&&e.height===s)console.log("renderQSLCardWithTable: Perfect size match, no scaling"),i.drawImage(e,0,0,r,s);else{let t=Math.min(r/e.width,s/e.height),a=e.width*t,l=e.height*t,n=(r-a)/2,o=(s-l)/2;console.log("renderQSLCardWithTable: Scaling image with letterbox/pillarbox:",{originalSize:"".concat(e.width,"x").concat(e.height),scale:t,scaledSize:"".concat(a,"x").concat(l),offset:"".concat(n,", ").concat(o)}),i.drawImage(e,n,o,a,l)}if(t){console.log("renderQSLCardWithTable: Rendering SVG table...");try{let e=(0,a.getQSLTablePosition)(r,s);console.log("renderQSLCardWithTable: Table position:",e);let l=t.cloneNode(!0);l.setAttribute("width",e.width.toString()),l.setAttribute("height",e.height.toString());let n=await (0,a.svgToImage)(l);console.log("renderQSLCardWithTable: SVG converted to image successfully"),i.drawImage(n,e.x,e.y,e.width,e.height),console.log("renderQSLCardWithTable: Table drawn on canvas")}catch(e){console.error("Error rendering SVG table:",e)}}else console.log("renderQSLCardWithTable: No SVG table provided");return l},l=async function(e,t,r){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1650,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1050;console.log("renderQSLCardWithTransform: Starting render with:",{hasBackgroundImage:!!e,hasSvgTable:!!r,transform:t,canvasSize:"".concat(s,"x").concat(l)});let i=document.createElement("canvas"),n=i.getContext("2d");if(!n)throw Error("Could not get canvas context");i.width=s,i.height=l,n.fillStyle="white",n.fillRect(0,0,s,l),n.save();let o=s/800,d=l/510,c=t.x*o,x=t.y*d,h=t.width*o,g=t.height*d;if(n.translate(c+h/2,x+g/2),n.rotate(t.rotation*Math.PI/180),n.translate(-h/2,-g/2),n.drawImage(e,0,0,h,g),n.restore(),r){console.log("renderQSLCardWithTransform: Rendering SVG table...");try{let e=(0,a.getQSLTablePosition)(s,l);console.log("renderQSLCardWithTransform: Table position:",e);let t=r.cloneNode(!0);t.setAttribute("width",e.width.toString()),t.setAttribute("height",e.height.toString());let i=await (0,a.svgToImage)(t);console.log("renderQSLCardWithTransform: SVG converted to image successfully"),n.drawImage(i,e.x,e.y,e.width,e.height),console.log("renderQSLCardWithTransform: Table drawn on canvas")}catch(e){console.error("Error rendering SVG table:",e)}}else console.log("renderQSLCardWithTransform: No SVG table provided");return i},i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"qsl_card.png";e.toBlob(e=>{if(!e)return void console.error("Failed to create blob from canvas");let r=URL.createObjectURL(e),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r)},"image/png",1)},n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1650,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1050,r=document.createElement("canvas"),s=r.getContext("2d");if(!s)throw Error("Could not get canvas context");r.width=e,r.height=t,s.fillStyle="white",s.fillRect(0,0,e,t);let l=(0,a.getQSLTablePosition)(e,t);return s.strokeStyle="#000000",s.lineWidth=2,s.setLineDash([8,8]),s.strokeRect(l.x,l.y,l.width,l.height),s.setLineDash([]),s.fillStyle="#666666",s.font="24px Arial, sans-serif",s.textAlign="center",s.fillText("QSL TABLE AREA",l.x+l.width/2,l.y-20),s.strokeStyle="#000000",s.lineWidth=2,s.setLineDash([]),s.beginPath(),s.moveTo(l.x-30,l.y),s.lineTo(l.x,l.y),s.lineTo(l.x,l.y-30),s.stroke(),s.beginPath(),s.moveTo(l.x+l.width+30,l.y),s.lineTo(l.x+l.width,l.y),s.lineTo(l.x+l.width,l.y-30),s.stroke(),s.beginPath(),s.moveTo(l.x-30,l.y+l.height),s.lineTo(l.x,l.y+l.height),s.lineTo(l.x,l.y+l.height+30),s.stroke(),s.beginPath(),s.moveTo(l.x+l.width+30,l.y+l.height),s.lineTo(l.x+l.width,l.y+l.height),s.lineTo(l.x+l.width,l.y+l.height+30),s.stroke(),s.fillStyle="#999999",s.font="18px Arial, sans-serif",s.textAlign="left",s.fillText("QSL Card Template - 1650 \xd7 1050 px (300 DPI)",50,50),s.fillText("Design your background image around this template",50,80),s.fillText("The dotted area shows where the QSL table will be placed",50,110),r},o=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1650,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1050;console.log("renderQSLCardExact: Starting render with EXACT dimensions:",{hasBackgroundImage:!!e,hasSvgTable:!!t,imageSize:"".concat(e.width,"x").concat(e.height),canvasSize:"".concat(r,"x").concat(s)});let l=document.createElement("canvas"),i=l.getContext("2d");if(!i)throw Error("Could not get canvas context");if(l.width=r,l.height=s,i.fillStyle="white",i.fillRect(0,0,r,s),i.drawImage(e,0,0,r,s),console.log("renderQSLCardExact: Image drawn at exact size without scaling"),t){console.log("renderQSLCardExact: Rendering SVG table...");try{let e=(0,a.getQSLTablePosition)(r,s);console.log("renderQSLCardExact: Table position:",e);let l=t.cloneNode(!0);l.setAttribute("width",e.width.toString()),l.setAttribute("height",e.height.toString());let n=await (0,a.svgToImage)(l);console.log("renderQSLCardExact: SVG converted to image successfully"),i.drawImage(n,e.x,e.y,e.width,e.height),console.log("renderQSLCardExact: Table drawn on canvas")}catch(e){console.error("Error rendering SVG table:",e)}}else console.log("renderQSLCardExact: No SVG table provided");return l}},4731:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>R});var a=r(5155),s=r(2115),l=r(6874),i=r.n(l),n=r(7550),o=r(6710),d=r(7213),c=r(9869),x=r(5339);let h={MAX_FILE_SIZE:0xa00000};var g=r(3775);let m=e=>{let{onImageUpload:t,isLoading:r=!1,error:l=null,hasImage:i=!1}=e,{t:n}=(0,g.o)(),m=(0,s.useCallback)(e=>{e.length>0&&t(e[0])},[t]),{getRootProps:b,getInputProps:u,isDragActive:y}=(0,o.VB)({onDrop:m,accept:{"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"],"image/webp":[".webp"]},maxFiles:1,multiple:!1});return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{...b(),className:"\n          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200\n          ".concat(y?"border-blue-400 dark:border-blue-500 bg-blue-50 dark:bg-blue-900/50":"border-gray-300 dark:border-gray-600 hover:border-blue-400 dark:hover:border-blue-500 hover:bg-gray-50 dark:hover:bg-gray-700/50","\n          ").concat(r?"opacity-50 pointer-events-none":"","\n        "),children:[(0,a.jsx)("input",{...u()}),(0,a.jsxs)("div",{className:"space-y-4",children:[i?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.A,{className:"mx-auto h-12 w-12 text-green-500 dark:text-green-400"}),(0,a.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400 font-medium",children:"✓ Imagen cargada correctamente"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Haz clic o arrastra una nueva imagen para reemplazar"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.A,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:y?"Suelta la imagen aqu\xed...":"Sube tu imagen de fondo"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Arrastra y suelta o haz clic para seleccionar"})]})]}),r&&(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 dark:border-blue-400"}),(0,a.jsx)("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Procesando imagen..."})]})]})]}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Formatos soportados: JPG, PNG, WEBP (m\xe1x. ",h.MAX_FILE_SIZE/1024/1024,"MB)"]})}),l&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-red-50 dark:bg-red-900/50 border border-red-200 dark:border-red-700 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 text-red-500 dark:text-red-400"}),(0,a.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:l})]})})]})};var b=r(133),u=r(2657),y=r(2568),f=r(4481),p=r(6262),w=r(3904),j=r(3796);let v=e=>{let{backgroundImage:t,qslTableSvg:l,imageTransform:i=null,onTransformChange:n,className:o=""}=e,{t:d}=(0,g.o)();(0,s.useEffect)(()=>{console.log("CardPreview: Props received:",{hasBackgroundImage:!!t,hasQslTableSvg:!!l,hasImageTransform:!!i,qslTableSvgDetails:l?{tagName:l.tagName,outerHTML:l.outerHTML.substring(0,200)+"..."}:null})},[t,l,i]);let c=(0,s.useRef)(null),x=(0,s.useRef)(null),[h,m]=(0,s.useState)(!1),[v,N]=(0,s.useState)(!1),k=(0,s.useCallback)(e=>{if(1650===e.width&&1050===e.height){let t=Math.min(800/e.width,510/e.height),r=e.width*t,a=e.height*t;return{x:(800-r)/2,y:(510-a)/2,width:r,height:a,rotation:0,scale:t}}{let t=Math.min(640/e.width,408/e.height),r=e.width*t,a=e.height*t;return{x:(800-r)/2,y:(510-a)/2,width:r,height:a,rotation:0,scale:t}}},[]),[C,S]=(0,s.useState)(()=>i||(t?k(t):{x:80,y:51,width:640,height:408,rotation:0,scale:1})),[T,E]=(0,s.useState)(!1),[L,M]=(0,s.useState)(!1),[W,A]=(0,s.useState)({x:0,y:0}),[I,P]=(0,s.useState)(null),[R,Q]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(t&&!i){let e=k(t);S(e),n&&n(e)}else i&&S(i)},[t,i,k,n]);let F=(0,s.useCallback)(e=>{e.save();let t=C.x+C.width/2,r=C.y+C.height/2;e.translate(t,r),e.rotate(C.rotation*Math.PI/180),e.translate(-C.width/2,-C.height/2),e.strokeStyle="#3b82f6",e.lineWidth=2,e.setLineDash([5,5]),e.strokeRect(0,0,C.width,C.height),e.restore()},[C]),z=(0,s.useCallback)(e=>{if(T||L)return;let t=C.x+C.width/2,r=C.y+C.height/2,a=C.width/2,s=C.height/2,l=C.rotation*Math.PI/180,i=Math.cos(l),n=Math.sin(l),o=(e,a)=>({x:t+(e*i-a*n),y:r+(e*n+a*i)}),d=[{id:"nw",...o(-a,-s)},{id:"ne",...o(a,-s)},{id:"sw",...o(-a,s)},{id:"se",...o(a,s)},{id:"n",...o(0,-s)},{id:"s",...o(0,s)},{id:"w",...o(-a,0)},{id:"e",...o(a,0)}];e.fillStyle="#3b82f6",e.strokeStyle="#ffffff",e.lineWidth=2,e.setLineDash([]),d.forEach(t=>{e.fillRect(t.x-6,t.y-6,12,12),e.strokeRect(t.x-6,t.y-6,12,12)})},[T,L,C]),G=(0,s.useCallback)(async()=>{let e=c.current;if(!e||!t||v)return;let a=e.getContext("2d");if(!a)return;console.log("renderEditor: Starting render with:",{hasBackgroundImage:!!t,hasQslTableSvg:!!l,showFinalPreview:v}),a.clearRect(0,0,800,510);for(let e=0;e<800;e+=20)for(let t=0;t<510;t+=20)a.fillStyle=(e+t)/20%2==0?"#f0f0f0":"#e0e0e0",a.fillRect(e,t,20,20);a.save();let s=C.x+C.width/2,i=C.y+C.height/2;if(a.translate(s,i),a.rotate(C.rotation*Math.PI/180),a.translate(-C.width/2,-C.height/2),a.drawImage(t,0,0,C.width,C.height),a.restore(),F(a),z(a),l){console.log("renderEditor: Drawing QSL table overlay...");try{let{getQSLTablePosition:e}=await Promise.resolve().then(r.bind(r,5844)),t=e(800,510),s=l.cloneNode(!0);s.setAttribute("width",t.width.toString()),s.setAttribute("height",t.height.toString());let{svgToImage:i}=await Promise.resolve().then(r.bind(r,5844)),n=await i(s);a.drawImage(n,t.x,t.y,t.width,t.height),console.log("renderEditor: QSL table drawn successfully")}catch(e){console.error("renderEditor: Error drawing QSL table:",e)}}},[t,C,v,l,F,z]),q=(0,s.useCallback)(()=>{let e=C.x+C.width/2,t=C.y+C.height/2,r=C.width/2,a=C.height/2,s=C.rotation*Math.PI/180,l=Math.cos(s),i=Math.sin(s),n=(r,a)=>({x:e+(r*l-a*i),y:t+(r*i+a*l)});return[{id:"nw",...n(-r,-a)},{id:"ne",...n(r,-a)},{id:"sw",...n(-r,a)},{id:"se",...n(r,a)},{id:"n",...n(0,-a)},{id:"s",...n(0,a)},{id:"w",...n(-r,0)},{id:"e",...n(r,0)}]},[C]),V=(0,s.useCallback)((e,t)=>{let r=C.x+C.width/2,a=C.y+C.height/2,s=-C.rotation*Math.PI/180,l=Math.cos(s),i=Math.sin(s),n=e-r,o=t-a;return Math.abs(n*l-o*i)<=C.width/2&&Math.abs(n*i+o*l)<=C.height/2},[C]),B=(0,s.useCallback)(e=>{if(v)return;let t=c.current;if(!t)return;let r=t.getBoundingClientRect(),a=e.clientX-r.left,s=e.clientY-r.top,l=q().find(e=>12>Math.abs(a-e.x)&&12>Math.abs(s-e.y));l?(M(!0),P(l.id),Q({...C})):V(a,s)&&(E(!0),Q({...C})),A({x:a,y:s})},[v,q,V,C]),U=(0,s.useCallback)(e=>{if(v||!T&&!L)return;let t=c.current;if(!t||!R)return;let r=t.getBoundingClientRect(),a=e.clientX-r.left,s=e.clientY-r.top,l=a-W.x,i=s-W.y;T?S(e=>({...e,x:R.x+l,y:R.y+i})):L&&I&&D(l,i)},[v,T,L,W,R,I]),D=(0,s.useCallback)((e,r)=>{if(!I||!R)return;let a={...R};switch(I){case"nw":a.width=Math.max(50,R.width-e),a.height=Math.max(50,R.height-r),a.x=R.x+e,a.y=R.y+r;break;case"ne":a.width=Math.max(50,R.width+e),a.height=Math.max(50,R.height-r),a.y=R.y+r;break;case"sw":a.width=Math.max(50,R.width-e),a.height=Math.max(50,R.height+r),a.x=R.x+e;break;case"se":a.width=Math.max(50,R.width+e),a.height=Math.max(50,R.height+r);break;case"n":a.height=Math.max(50,R.height-r),a.y=R.y+r;break;case"s":a.height=Math.max(50,R.height+r);break;case"w":a.width=Math.max(50,R.width-e),a.x=R.x+e;break;case"e":a.width=Math.max(50,R.width+e)}t&&(a.scale=Math.max(a.width/t.width,a.height/t.height)),S(a)},[I,R,t]),_=(0,s.useCallback)(()=>{(T||L)&&n&&n(C),E(!1),M(!1),P(null),Q(null)},[T,L,C,n]),O=(0,s.useCallback)(e=>{let t={...C,rotation:C.rotation+e};S(t),n&&n(t)},[C,n]),X=(0,s.useCallback)(e=>{let t={...C,width:C.width*e,height:C.height*e,scale:C.scale*e};S(t),n&&n(t)},[C,n]),H=(0,s.useCallback)(()=>{if(!t)return;let e=k(t);S(e),n&&n(e)},[t,k,n]),Z=(0,s.useCallback)(async()=>{if(x.current&&t){m(!0);try{let e,a=x.current;if(a.width=1650,a.height=1050,console.log("Rendering final preview with:",{hasBackgroundImage:!!t,hasQslTable:!!l,imageSize:"".concat(t.width,"x").concat(t.height),transform:C}),1650===t.width&&1050===t.height){console.log("Template detected - using exact rendering without scaling");let{renderQSLCardExact:a}=await Promise.resolve().then(r.bind(r,3796));e=await a(t,l||void 0,1650,1050)}else{let r=k(t),a=Math.abs(C.x-r.x)>5||Math.abs(C.y-r.y)>5||Math.abs(C.rotation)>.1||Math.abs(C.width-r.width)>5||Math.abs(C.height-r.height)>5;console.log("Transform comparison:",{current:C,initial:r,hasSignificantChanges:a}),a?(console.log("Using renderQSLCardWithTransform"),e=await (0,j.lF)(t,C,l||void 0,1650,1050)):(console.log("Using renderQSLCardWithTable (with improved scaling)"),e=await (0,j.zu)(t,l||void 0,1650,1050))}let s=a.getContext("2d");s&&e?(s.clearRect(0,0,1650,1050),s.drawImage(e,0,0),console.log("Final preview rendered successfully")):console.error("Failed to get context or rendered canvas")}catch(e){console.error("Error rendering final preview:",e)}finally{m(!1)}}},[t,l,C,k]);(0,s.useEffect)(()=>{v&&Z()},[v,Z]),(0,s.useEffect)(()=>{v||G()},[G,v]);let J=(0,s.useCallback)(()=>{N(!v)},[v]);return t?(0,a.jsx)("div",{className:"text-center ".concat(o),children:(0,a.jsxs)("div",{className:"inline-block p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg border dark:border-gray-600 relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:d(v?"preview.finalPreview":"preview.imageEditor")}),(0,a.jsx)("button",{onClick:J,className:"px-3 py-1 text-white text-sm rounded transition-colors flex items-center gap-1 ".concat(v?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"),children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.A,{size:14}),d("preview.backToEdit")]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{size:14}),d("preview.finalView")]})})]}),h&&(0,a.jsx)("div",{className:"absolute inset-0 bg-white dark:bg-gray-800 bg-opacity-75 dark:bg-opacity-75 flex items-center justify-center rounded-lg z-10",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:d("preview.rendering")})]})}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative inline-block",children:[(0,a.jsx)("canvas",{ref:c,width:800,height:510,className:"border border-gray-200 dark:border-gray-600 rounded cursor-move ".concat(v?"hidden":""),style:{maxWidth:"100%",height:"auto"},onMouseDown:B,onMouseMove:U,onMouseUp:_,onMouseLeave:_}),(0,a.jsx)("canvas",{ref:x,className:"border border-gray-200 dark:border-gray-600 rounded ".concat(v?"":"hidden"),style:{maxWidth:"100%",height:"auto"}})]}),!v&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 justify-center",children:[(0,a.jsxs)("button",{onClick:()=>O(-15),className:"flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded text-sm transition-colors",children:[(0,a.jsx)(b.A,{size:16}),"-15\xb0"]}),(0,a.jsxs)("button",{onClick:()=>O(15),className:"flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded text-sm transition-colors",children:[(0,a.jsx)(y.A,{size:16}),"+15\xb0"]}),(0,a.jsxs)("button",{onClick:()=>X(1.1),className:"flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded text-sm transition-colors",children:[(0,a.jsx)(f.A,{size:16}),"110%"]}),(0,a.jsxs)("button",{onClick:()=>X(.9),className:"flex items-center gap-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded text-sm transition-colors",children:[(0,a.jsx)(p.A,{size:16}),"90%"]}),(0,a.jsxs)("button",{onClick:H,className:"flex items-center gap-1 px-3 py-2 bg-red-100 hover:bg-red-200 dark:bg-red-900 dark:hover:bg-red-800 text-red-700 dark:text-red-300 rounded text-sm transition-colors",children:[(0,a.jsx)(b.A,{size:16}),d("qslEditor.reset")]})]}),v&&(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("button",{onClick:Z,disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded transition-colors",children:[(0,a.jsx)(w.A,{size:16,className:h?"animate-spin":""}),d(h?"preview.rendering":"preview.reRender")]})}),!v&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[(0,a.jsxs)("div",{children:[d("preview.scale"),": ",(100*C.scale).toFixed(1),"%"]}),(0,a.jsxs)("div",{children:[d("preview.rotation"),": ",C.rotation.toFixed(1),"\xb0"]}),(0,a.jsxs)("div",{children:[d("preview.position"),": (",Math.round(C.x),", ",Math.round(C.y),")"]}),(0,a.jsxs)("div",{children:[d("preview.size"),": ",Math.round(C.width)," \xd7 ",Math.round(C.height)]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:v?(0,a.jsxs)(a.Fragment,{children:[d("preview.exactResult"),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"text-green-600 dark:text-green-400",children:["✓ ",d("preview.finalResult")," - ",d("download.button")]})]}):(0,a.jsxs)(a.Fragment,{children:[d("preview.dragInstructions"),(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:d("preview.followsBlueBox")})]})})]})]})}):(0,a.jsx)("div",{className:"text-center p-8 ".concat(o),children:(0,a.jsx)("div",{className:"w-full h-64 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center",children:(0,a.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:d("preview.uploadFirst")})})})};var N=r(5196),k=r(1788);let C=e=>{let{onDownload:t,isProcessing:r=!1,disabled:l=!1,text:i}=e,{t:n}=(0,g.o)(),[o,d]=(0,s.useState)(!1),c=async()=>{if(!l&&!r)try{await t(),d(!0),setTimeout(()=>d(!1),3e3)}catch(e){console.error("Error al descargar:",e)}},x=l||r,h=i||n("download.button");return(0,a.jsx)("button",{onClick:c,disabled:x,className:"\n        w-full flex items-center justify-center space-x-2 px-6 py-3 rounded-lg font-medium transition-all duration-200\n        ".concat(x?"bg-gray-300 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":o?"bg-green-500 dark:bg-green-600 text-white hover:bg-green-600 dark:hover:bg-green-700 shadow-lg":"bg-green-600 dark:bg-green-500 text-white hover:bg-green-700 dark:hover:bg-green-600 hover:shadow-lg shadow-green-500/30 transform hover:-translate-y-0.5 animate-pulse","\n      "),children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,a.jsx)("span",{children:n("download.processing")})]}):o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:n("download.complete")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:h})]})})};var S=r(3127);let T={headerColor:"#B8860B",bodyColor:"#FFFFFF",borderColor:"#000000",textColor:"#000000",borderWidth:2,language:"en"},E=e=>{let{onTableGenerated:t,config:r}=e,{language:l,t:i}=(0,g.o)(),[n,o]=(0,s.useState)(r||T),[d,c]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{c(!0)},[]),(0,s.useEffect)(()=>{d&&o(e=>({...e,language:l}))},[l,d]);let u=()=>{if(!m.current||!d)return void console.log("generateSVG: Cannot generate - svgRef:",!!m.current,"mounted:",d);console.log("generateSVG: Generating SVG table...");let e=m.current.cloneNode(!0);console.log("generateSVG: SVG cloned successfully, calling onTableGenerated"),h(!0),t(e)};(0,s.useEffect)(()=>{d&&x&&u()},[n,d,x]);let y=(e,t)=>{o(r=>({...r,[e]:t}))};return d?(0,a.jsxs)("div",{className:"w-full space-y-6",children:[!x&&(0,a.jsx)("div",{className:"text-center p-8 bg-gray-50 dark:bg-gray-700 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(S.A,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:i("qslEditor.title")}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:i("qslEditor.generateDescription")}),(0,a.jsxs)("button",{onClick:u,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white rounded-lg font-medium transition-colors flex items-center gap-2 mx-auto",children:[(0,a.jsx)(S.A,{className:"h-5 w-5"}),i("qslEditor.generate")]})]})]})}),x&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 block",children:i("qslEditor.headerColor")}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"color",value:n.headerColor,onChange:e=>y("headerColor",e.target.value),className:"w-16 h-10 rounded border border-gray-300 cursor-pointer"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 font-mono",children:n.headerColor})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 block",children:i("qslEditor.bodyColor")}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"color",value:n.bodyColor,onChange:e=>y("bodyColor",e.target.value),className:"w-16 h-10 rounded border border-gray-300 cursor-pointer"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 font-mono",children:n.bodyColor})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 block",children:i("qslEditor.borderColor")}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"color",value:n.borderColor,onChange:e=>y("borderColor",e.target.value),className:"w-16 h-10 rounded border border-gray-300 cursor-pointer"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 font-mono",children:n.borderColor})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 block",children:i("qslEditor.textColor")}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"color",value:n.textColor,onChange:e=>y("textColor",e.target.value),className:"w-16 h-10 rounded border border-gray-300 cursor-pointer"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 font-mono",children:n.textColor})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 block",children:i("qslEditor.borderWidth")}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"range",min:"1",max:"5",value:n.borderWidth,onChange:e=>y("borderWidth",parseInt(e.target.value)),className:"flex-1"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 font-mono min-w-[40px]",children:[n.borderWidth,"px"]})]})]})})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsxs)("button",{onClick:()=>{o({...T,language:l})},className:"flex items-center gap-2 px-4 py-2 text-sm bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[(0,a.jsx)(b.A,{className:"h-4 w-4"}),i("qslEditor.reset")]}),(0,a.jsxs)("button",{onClick:()=>{if(!m.current)return;let e=new Blob([new XMLSerializer().serializeToString(m.current)],{type:"image/svg+xml;charset=utf-8"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="tabla_qsl.svg",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},className:"flex items-center gap-2 px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),i("qslEditor.downloadSVG")]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg border ".concat(x?"":"hidden"),children:[(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-700 mb-4 text-center",children:i("qslEditor.previewTitle")}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("svg",{ref:m,width:"1000",height:"250",viewBox:"-10 -10 920 220",xmlns:"http://www.w3.org/2000/svg",className:"rounded shadow-sm max-w-full",children:[(0,a.jsx)("defs",{children:(0,a.jsx)("style",{children:"\n                  .header-text { \n                    font-family: Arial, sans-serif; \n                    font-size: 14px; \n                    font-weight: bold; \n                    text-anchor: middle; \n                    dominant-baseline: middle;\n                  }\n                  .sub-header-text { \n                    font-family: Arial, sans-serif; \n                    font-size: 11px; \n                    font-weight: bold; \n                    text-anchor: middle; \n                    dominant-baseline: middle;\n                  }\n                  .long-text {\n                    font-family: Arial, sans-serif; \n                    font-size: 12px; \n                    font-weight: bold; \n                    text-anchor: middle; \n                    dominant-baseline: middle;\n                  }\n                "})}),(0,a.jsx)("rect",{x:"0",y:"0",width:"900",height:"90",fill:n.headerColor,stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("rect",{x:"0",y:"90",width:"900",height:"110",fill:n.bodyColor,stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"120",y1:"0",x2:"120",y2:"200",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"270",y1:"0",x2:"270",y2:"200",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"420",y1:"0",x2:"420",y2:"200",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"540",y1:"0",x2:"540",y2:"200",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"660",y1:"0",x2:"660",y2:"200",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"780",y1:"0",x2:"780",y2:"200",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"0",y1:"90",x2:"900",y2:"90",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"120",y1:"45",x2:"270",y2:"45",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"170",y1:"45",x2:"170",y2:"90",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("line",{x1:"220",y1:"45",x2:"220",y2:"90",stroke:n.borderColor,strokeWidth:n.borderWidth}),(0,a.jsx)("text",{x:"60",y:"45",className:"long-text",fill:n.textColor,children:i("qsl.confirming")}),(0,a.jsx)("text",{x:"195",y:"22",className:"header-text",fill:n.textColor,children:i("qsl.date")}),(0,a.jsx)("text",{x:"345",y:"45",className:"header-text",fill:n.textColor,children:i("qsl.utc")}),(0,a.jsx)("text",{x:"480",y:"45",className:"header-text",fill:n.textColor,children:i("qsl.mhz")}),(0,a.jsx)("text",{x:"600",y:"45",className:"header-text",fill:n.textColor,children:i("qsl.rst")}),(0,a.jsx)("text",{x:"720",y:"45",className:"header-text",fill:n.textColor,children:i("qsl.mode")}),(0,a.jsx)("text",{x:"840",y:"45",className:"header-text",fill:n.textColor,children:i("qsl.qsl")}),(0,a.jsx)("text",{x:"60",y:"67",className:"long-text",fill:n.textColor,children:i("qsl.qsoWith")}),(0,a.jsx)("text",{x:"145",y:"67",className:"sub-header-text",fill:n.textColor,children:i("qsl.day")}),(0,a.jsx)("text",{x:"195",y:"67",className:"sub-header-text",fill:n.textColor,children:i("qsl.month")}),(0,a.jsx)("text",{x:"245",y:"67",className:"sub-header-text",fill:n.textColor,children:i("qsl.year")}),(0,a.jsx)("rect",{x:"0",y:"0",width:"900",height:"200",fill:"none",stroke:n.borderColor,strokeWidth:n.borderWidth})]})})]})]}):(0,a.jsx)("div",{className:"h-64 bg-gray-100 animate-pulse rounded-lg"})};var L=r(8154);let M=e=>{let{className:t=""}=e,{t:r}=(0,g.o)();return(0,a.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ".concat(t),children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mx-auto",children:(0,a.jsx)(k.A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:r("template.title")}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:r("template.description")})]}),(0,a.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-left",children:[(0,a.jsxs)("h4",{className:"font-medium text-gray-800 dark:text-white mb-2",children:[r("template.features"),":"]}),(0,a.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-300 space-y-1",children:[(0,a.jsxs)("li",{children:["• ",r("template.feature1")]}),(0,a.jsxs)("li",{children:["• ",r("template.feature2")]}),(0,a.jsxs)("li",{children:["• ",r("template.feature3")]}),(0,a.jsxs)("li",{children:["• ",r("template.feature4")]})]})]}),(0,a.jsx)("div",{className:"space-y-2",children:(0,a.jsxs)("button",{onClick:()=>{try{let e=(0,j.As)();(0,j.jb)(e,"qsl_template.png")}catch(e){console.error("Error generating template:",e)}},className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),r("template.download")]})})]})})};var W=r(8621);let A=()=>{let[e,t]=(0,s.useState)({isProcessing:!1,error:null}),r=async(e,r,a)=>{t({isProcessing:!0,error:null});try{let s,l=1650===e.width&&1050===e.height;return console.log("useImageProcessor: generateFinalCanvas",{imageSize:"".concat(e.width,"x").concat(e.height),isTemplate:l,hasTransform:!!a,hasQslTable:!!r}),l?(console.log("Template detected - using exact rendering without scaling"),s=await (0,j.renderQSLCardExact)(e,r||void 0,1650,1050)):a?(console.log("Using transform-based rendering"),s=await (0,j.lF)(e,a,r||void 0,1650,1050)):(console.log("Using default rendering with improved scaling"),s=await (0,j.zu)(e,r||void 0,1650,1050)),t({isProcessing:!1,error:null}),s}catch(e){throw t({isProcessing:!1,error:e instanceof Error?e.message:"Error desconocido"}),e}},a=async function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"tarjeta_qsl.png";try{let l=await r(e,t,a);(0,j.jb)(l,s)}catch(e){throw console.error("Error al descargar la tarjeta QSL:",e),e}};return{...e,generateFinalCanvas:r,downloadQSLCard:a}},I=e=>e.size>0xa00000?{isValid:!1,error:"El archivo es demasiado grande. M\xe1ximo ".concat(10,"MB permitidos.")}:["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?{isValid:!0}:{isValid:!1,error:"Formato no soportado. Solo se permiten JPG, PNG y WEBP."},P=e=>new Promise((t,r)=>{let a=new FileReader;a.onload=e=>{var a;let s=new Image;s.onload=()=>t(s),s.onerror=r,s.src=null==(a=e.target)?void 0:a.result},a.onerror=r,a.readAsDataURL(e)});function R(){let{t:e}=(0,g.o)(),[t,r]=(0,s.useState)(null),[l,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),[b,u]=(0,s.useState)(null),[y,f]=(0,s.useState)(1),{isProcessing:p,error:w,downloadQSLCard:j}=A();(0,s.useEffect)(()=>{t&&1===y&&f(2)},[t,y]);let N=async e=>{h(!0),u(null);try{let t=I(e);if(!t.isValid)throw Error(t.error);let a=await P(e);r(a),o(null)}catch(e){u(e instanceof Error?e.message:"Error al procesar la imagen")}finally{h(!1)}},k=async()=>{if(t)try{await j(t,d,l),f(4)}catch(e){console.error("Error al descargar:",e)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[(0,a.jsx)("div",{className:"fixed top-4 right-4 z-50",children:(0,a.jsx)(L.LanguageToggle,{})}),(0,a.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsx)("div",{className:"flex justify-between items-center h-16",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)(i(),{href:"/",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:[(0,a.jsx)(n.A,{className:"w-5 h-5"}),e("common.back")]}),(0,a.jsx)("div",{className:"h-6 w-px bg-gray-300 dark:bg-gray-600"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e("apps.qslCreator.title")})]})})})}),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"text-center mb-12",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-gray-800 dark:text-white mb-4",children:e("apps.qslCreator.title")}),(0,a.jsx)("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-6 max-w-3xl mx-auto",children:e("apps.qslCreator.description")})]}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto mb-8",children:(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:["\uD83D\uDCCB ",e("instructions.title")]}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[(0,a.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"1"}),(0,a.jsx)("span",{children:e("instructions.step1")})]}),(0,a.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"2"}),(0,a.jsx)("span",{children:e("instructions.step2")})]}),(0,a.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"3"}),(0,a.jsx)("span",{children:e("instructions.step3")})]}),(0,a.jsxs)("li",{className:"flex items-start space-x-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-5 h-5 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:"4"}),(0,a.jsx)("span",{children:e("instructions.step4")})]})]})]}),(0,a.jsx)(M,{}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:["⚙️ ",e("tech.title")]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e("tech.resolution")}),(0,a.jsx)("span",{className:"font-semibold",children:"1650 \xd7 1050 px"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e("tech.format")}),(0,a.jsx)("span",{className:"font-semibold",children:'5.5" \xd7 3.5"'})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e("tech.inputFormats")}),(0,a.jsx)("span",{className:"font-semibold",children:"JPG, PNG, WEBP"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e("tech.maxSize")}),(0,a.jsx)("span",{className:"font-semibold",children:"10MB"})]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:(0,a.jsx)("p",{className:"text-xs text-green-700 dark:text-green-300 font-medium",children:e("tech.localHint")})})]})]})}),(0,a.jsxs)("div",{className:"max-w-2xl mx-auto mb-8",children:[(0,a.jsx)("div",{className:"flex justify-center items-center space-x-4",children:[1,2,3,4].map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"\n                  w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all\n                  ".concat(y>=e?4===e&&4===y&&t&&d?"bg-green-600 dark:bg-green-500 text-white shadow-lg shadow-green-500/30 animate-pulse":"bg-blue-600 dark:bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400","\n                "),children:e}),e<4&&(0,a.jsx)("div",{className:"\n                    w-8 h-1 mx-2 transition-all\n                    ".concat(y>e?"bg-blue-600 dark:bg-blue-500":"bg-gray-200 dark:bg-gray-700","\n                  ")})]},e))}),(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:y<=4&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"font-medium",children:e("steps.current")}),(0,a.jsxs)("span",{className:"ml-1",children:[1===y&&e("steps.image"),2===y&&e("steps.table"),3===y&&e("steps.preview"),4===y&&e("steps.download")]}),y<4&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"mx-2",children:"•"}),(0,a.jsx)("span",{className:"font-medium",children:e("steps.next")}),(0,a.jsxs)("span",{className:"ml-1",children:[1===y&&e("steps.table"),2===y&&e("steps.preview"),3===y&&e("steps.download")]})]})]})})})]}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"transition-all ".concat(y>=1?"opacity-100":"opacity-50"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 dark:bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:e("upload.title")})]}),(0,a.jsx)(m,{onImageUpload:N,isLoading:x,error:b,hasImage:!!t})]})}),(0,a.jsx)("div",{className:"transition-all ".concat(y>=2?"opacity-100":"opacity-50"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 dark:bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:e("table.title")})]}),(0,a.jsx)(E,{onTableGenerated:e=>{console.log("handleTableGenerated: Received SVG table:",e),console.log("handleTableGenerated: SVG outerHTML:",e.outerHTML.substring(0,200)+"..."),c(e),f(3)}})]})})]}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"transition-all ".concat(t?"opacity-100":"opacity-50"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-600 dark:bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:e("preview.title")})]}),(0,a.jsx)(v,{backgroundImage:t,qslTableSvg:d,imageTransform:l,onTransformChange:e=>{o(e)}})]})}),(0,a.jsx)("div",{className:"transition-all ".concat(y>=4?"opacity-100":"opacity-50"),children:(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 ".concat(4===y&&t&&d?"ring-2 ring-green-500 ring-opacity-50 shadow-green-500/20":""),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all ".concat(4===y&&t&&d?"bg-green-600 dark:bg-green-500 text-white shadow-lg shadow-green-500/30 animate-pulse":"bg-blue-600 dark:bg-blue-500 text-white"),children:"4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:e("download.title")})]}),(0,a.jsx)(C,{onDownload:k,isProcessing:p,disabled:!t||!d}),w&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-900 border border-red-300 dark:border-red-700 rounded text-red-700 dark:text-red-300 text-sm",children:w})]})})]})]})}),t&&(0,a.jsx)("div",{className:"max-w-4xl mx-auto mt-8 text-center",children:(0,a.jsx)("button",{onClick:()=>{r(null),o(null),c(null),u(null),f(1)},className:"px-6 py-3 bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-600 text-white rounded-lg font-medium transition-colors",children:e("common.reset")})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto mt-16",children:(0,a.jsx)(W.v,{})}),(0,a.jsx)("footer",{className:"mt-16 py-8 border-t border-gray-200 dark:border-gray-700",children:(0,a.jsxs)("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:["2025 - ",e("header.createdBy")," ",(0,a.jsx)("span",{className:"text-blue-600 dark:text-blue-400 font-semibold",children:"LU9ANG"})," - ",(0,a.jsx)("a",{href:"https://github.com/alvarongg",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-semibold transition-colors",children:"@alvarongg"})]})})]})]})}},5844:(e,t,r)=>{"use strict";r.d(t,{getQSLTablePosition:()=>s,svgToImage:()=>a});let a=e=>new Promise((t,r)=>{try{console.log("svgToImage: Starting conversion...");let a=new XMLSerializer().serializeToString(e);console.log("svgToImage: SVG serialized, length:",a.length),console.log("svgToImage: SVG data preview:",a.substring(0,200)+"...");let s=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),l=URL.createObjectURL(s);console.log("svgToImage: Blob URL created:",l);let i=new Image;i.onload=()=>{console.log("svgToImage: Image loaded successfully, dimensions:",i.width,"x",i.height),URL.revokeObjectURL(l),t(i)},i.onerror=e=>{console.error("svgToImage: Image load error:",e),URL.revokeObjectURL(l),r(Error("Failed to load SVG as image"))},i.src=l}catch(e){console.error("svgToImage: Exception during conversion:",e),r(e)}}),s=(e,t)=>{let r=Math.floor(.9*e),a=Math.floor(.25*r),s=Math.floor(.08*t);return{x:Math.floor((e-r)/2),y:t-a-s,width:r,height:a}}},8154:(e,t,r)=>{"use strict";r.d(t,{LanguageToggle:()=>i});var a=r(5155);r(2115);var s=r(7835),l=r(3775);let i=()=>{let{language:e,setLanguage:t,t:r}=(0,l.o)();return(0,a.jsxs)("button",{onClick:()=>{t("es"===e?"en":"es")},className:"flex items-center gap-2 px-3 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",title:r("language.toggle"),children:[(0,a.jsx)(s.A,{className:"h-4 w-4 text-gray-600 dark:text-gray-300"}),(0,a.jsx)("span",{className:"font-medium text-sm text-gray-700 dark:text-gray-300",children:r("language.current")})]})}},8621:(e,t,r)=>{"use strict";r.d(t,{v:()=>c});var a=r(5155),s=r(2115),l=r(8883),i=r(5196),n=r(2486),o=r(5339),d=r(3775);let c=e=>{let{className:t=""}=e,{t:r}=(0,d.o)(),[c,x]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),[m,b]=(0,s.useState)(!1),[u,y]=(0,s.useState)("idle"),[f,p]=(0,s.useState)(""),w=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),j=e=>/^[A-Z]{1,3}[0-9][A-Z]{1,4}(\/[A-Z0-9]+)?$/.test(e.toUpperCase()),v=async(e,t)=>{try{let r=t&&t.trim()?t.trim().toUpperCase():e.split("@")[0],a={email:e,listIds:[1],attributes:{FNAME:r,...t&&t.trim()&&{CALLSIGN:t.trim().toUpperCase()}},updateEnabled:!1},s=await fetch("".concat("https://api.brevo.com/v3","/contacts"),{method:"POST",headers:{"Content-Type":"application/json","api-key":"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"},body:JSON.stringify(a)}),l=await s.json();if(s.ok||"duplicate_parameter"===l.code)return{success:!0};return{success:!1,error:l.message||"Subscription failed"}}catch(e){return console.error("Newsletter subscription error:",e),{success:!1,error:"Network error"}}},N=async e=>{if(e.preventDefault(),!c.trim()||!w(c)){y("error"),p(r("newsletter.invalidEmail"));return}b(!0),y("idle"),p("");let t=await v(c,h.trim()||void 0);t.success?(y("success"),x(""),g("")):(y("error"),p(t.error||r("newsletter.error"))),b(!1),setTimeout(()=>{y("idle"),p("")},t.success?3e3:5e3)};return(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800 ".concat(t),children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:gap-8",children:[(0,a.jsxs)("div",{className:"flex-1 text-center lg:text-left mb-6 lg:mb-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center lg:justify-start gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:(0,a.jsx)(l.A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:r("newsletter.title")})]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:r("newsletter.subtitle")})]}),(0,a.jsx)("div",{className:"flex-1 lg:max-w-lg",children:(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:["success"===u?(0,a.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 text-green-600 dark:text-green-400",children:[(0,a.jsx)(i.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"font-semibold",children:r("newsletter.success")})]})}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,a.jsx)("input",{id:"email",type:"email",value:c,onChange:e=>x(e.target.value),placeholder:r("newsletter.placeholder"),disabled:m,className:"w-full px-3 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors disabled:opacity-50 disabled:cursor-not-allowed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"callsign",className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:r("newsletter.callsignLabel")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{id:"callsign",type:"text",value:h,onChange:e=>g(e.target.value.toUpperCase()),placeholder:r("newsletter.callsignPlaceholder"),disabled:m,className:"w-full px-3 py-2 text-sm rounded-lg border bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:border-transparent transition-colors disabled:opacity-50 disabled:cursor-not-allowed ".concat(h.trim()&&!j(h.trim())?"border-yellow-400 dark:border-yellow-500 focus:ring-yellow-500":h.trim()&&j(h.trim())?"border-green-400 dark:border-green-500 focus:ring-green-500":"border-gray-300 dark:border-gray-600 focus:ring-blue-500")}),h.trim()&&(0,a.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2",children:j(h.trim())?(0,a.jsx)("span",{className:"text-green-500 text-xs",children:"✓"}):(0,a.jsx)("span",{className:"text-yellow-500 text-xs",children:"⚠"})})]})]})]}),(0,a.jsx)("div",{className:"pt-2",children:(0,a.jsx)("button",{type:"submit",disabled:m||!c.trim(),className:"w-full px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 dark:disabled:bg-gray-600 text-white font-semibold rounded-lg transition-colors flex items-center gap-2 justify-center disabled:cursor-not-allowed",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,a.jsx)("span",{className:"text-sm",children:r("newsletter.subscribing")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:r("newsletter.button")})]})})})]}),"error"===u&&(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-red-600 dark:text-red-400 text-xs font-medium",children:[(0,a.jsx)(o.A,{className:"h-4 w-4"}),f||r("newsletter.error")]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:r("newsletter.privacy")})]})})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[95,818,775,441,684,358],()=>t(212)),_N_E=e.O()}]);